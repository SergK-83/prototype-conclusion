<div class="block-view">
  <div class="block-view__aside">
    <div class="block-view__nav">
      <div class="block-view__nav-content">

        <ul class="custom-tree">

          <ng-container
            *ngFor="let node of treeNodes"
            [ngTemplateOutlet]="childNodesTemplate"
            [ngTemplateOutletContext]="{ node: node }"
          ></ng-container>

          <ng-template #childNodesTemplate let-node="node">

            <custom-tree-node
              [node]="node"
              (createChildNode)="createChildNode(node)"
            >

              <ng-container *ngIf="node.childList?.length">

                HELLO

              </ng-container>

            </custom-tree-node>

          </ng-template>

        </ul>

        <ul class="custom-tree" style="display: none">
          <ng-container *ngFor="let node of treeNodes">

            <ng-container *ngIf="node.childList?.length">
              <li class="custom-tree__node custom-tree__node_main" [ngClass]="{'custom-tree__node_expanded': isExpandedNode}">

                <div class="custom-tree__node-body">
                  <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #customTreeNodeMenu="matMenu">
                    <button mat-menu-item>
                      Редактировать
                    </button>
                    <button mat-menu-item (click)="showNewNode=!showNewNode">
                      Новый пункт
                    </button>
                    <button mat-menu-item>
                      Новый вложенный пункт
                    </button>
                    <button mat-menu-item>
                      Удалить
                    </button>
                  </mat-menu>

                  <div class="custom-tree__node-name">
                    <span class="custom-tree__node-number">{{node.id}}</span>
                    {{node.name}}
                  </div>

                  <button mat-button class="custom-tree__node-add mat-icon-button" (click)="isExpandedNode=!isExpandedNode">
                    <mat-icon>chevron_right</mat-icon>
                  </button>
                </div>

                <ul class="custom-tree__sub-list">

                  <ng-container *ngFor="let node of node.childList">

                    <li class="custom-tree__node">
                      <div class="custom-tree__node-body">
                        <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                          <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #customTreeNodeMenu1="matMenu">
                          <button mat-menu-item>
                            Редактировать
                          </button>
                          <button mat-menu-item>
                            Новый пункт
                          </button>
                          <button mat-menu-item>
                            Новый вложенный пункт
                          </button>
                          <button mat-menu-item>
                            Удалить
                          </button>
                        </mat-menu>

                        <div class="custom-tree__node-name">
                          <span class="custom-tree__node-number">{{node.id}}</span>
                          {{node.name}}
                        </div>
                      </div>
                    </li>

                  </ng-container>

                </ul>

              </li>

              <li class="custom-tree__node custom-tree__node_main" *ngIf="showNewNode">
                <div class="custom-tree__node-body">
                  <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                    <mat-icon>more_vert</mat-icon>
                  </button>

                  <div class="custom-tree__node-name custom-tree__node-name-edit">
                    <span class="custom-tree__node-number">6.</span>
                    <mat-form-field class="custom-tree__node-name-input" floatLabel="never">
                      <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="1" placeholder="Новый пункт..." autofocus [(ngModel)]="nodeName"></textarea>
                    </mat-form-field>
                  </div>

                  <div class="custom-tree__node-tools">
                    <button mat-button
                            matTooltip="Сохранить"
                            matTooltipPosition="right"
                            (click)="saveNewTreeNode()">
                      <mat-icon class="text-green">done</mat-icon>
                    </button>
                  </div>
                </div>
              </li>
            </ng-container>

            <ng-container *ngIf="!node.childList?.length">
              <li class="custom-tree__node custom-tree__node_main" *ngIf="!node.childList?.length" [ngClass]="{'custom-tree__node_expanded': isExpandedNode}">

                <div class="custom-tree__node-body">
                  <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #customTreeNodeMenu="matMenu">
                    <button mat-menu-item>
                      Редактировать
                    </button>
                    <button mat-menu-item (click)="showNewNode=!showNewNode">
                      Новый пункт
                    </button>
                    <button mat-menu-item>
                      Новый вложенный пункт
                    </button>
                    <button mat-menu-item>
                      Удалить
                    </button>
                  </mat-menu>

                  <div class="custom-tree__node-name">
                    <span class="custom-tree__node-number">{{node.id}}</span>
                    {{node.name}}
                  </div>

                  <button mat-button class="custom-tree__node-add mat-icon-button" disabled (click)="isExpandedNode=!isExpandedNode"></button>
                </div>

              </li>

              <li class="custom-tree__node custom-tree__node_main" *ngIf="showNewNode">
                <div class="custom-tree__node-body">
                  <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                    <mat-icon>more_vert</mat-icon>
                  </button>

                  <div class="custom-tree__node-name custom-tree__node-name-edit">
                    <span class="custom-tree__node-number">6.</span>
                    <mat-form-field class="custom-tree__node-name-input" floatLabel="never">
                      <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="1" placeholder="Новый пункт..." autofocus [(ngModel)]="nodeName"></textarea>
                    </mat-form-field>
                  </div>

                  <div class="custom-tree__node-tools">
                    <button mat-button
                            matTooltip="Сохранить"
                            matTooltipPosition="right"
                            (click)="saveNewTreeNode()">
                      <mat-icon class="text-green">done</mat-icon>
                    </button>
                  </div>
                </div>
              </li>
            </ng-container>

          </ng-container>
        </ul>

        <ul class="custom-tree" style="display: none">

          <li class="custom-tree__node custom-tree__node_main" [ngClass]="{'custom-tree__node_expanded': isExpandedNode}">
            <div class="custom-tree__node-body">
              <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #customTreeNodeMenu1="matMenu">
                <button mat-menu-item>
                  Редактировать
                </button>
                <button mat-menu-item (click)="addNewTreeNode()">
                  Новый пункт
                </button>
                <button mat-menu-item>
                  Новый вложенный пункт
                </button>
                <button mat-menu-item>
                  Удалить
                </button>
              </mat-menu>

              <div class="custom-tree__node-name">
                <span class="custom-tree__node-number">1.</span>
                Общие положения и сведения о заключении экспертизы
              </div>

              <button mat-button class="custom-tree__node-add mat-icon-button" (click)="isExpandedNode=!isExpandedNode">
                <mat-icon>chevron_right</mat-icon>
              </button>
            </div>

            <ul class="custom-tree__sub-list">

              <li class="custom-tree__node">
                <div class="custom-tree__node-body">
                  <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #customTreeNodeMenu1="matMenu">
                    <button mat-menu-item>
                      Редактировать
                    </button>
                    <button mat-menu-item>
                      Новый пункт
                    </button>
                    <button mat-menu-item>
                      Новый вложенный пункт
                    </button>
                    <button mat-menu-item>
                      Удалить
                    </button>
                  </mat-menu>

                  <div class="custom-tree__node-name">
                    <span class="custom-tree__node-number">1.1.</span>
                    Общие положения и сведения о заключении экспертизы
                  </div>
                </div>
              </li>
            </ul>
          </li>

          <li class="custom-tree__node custom-tree__node_main">
            <div class="custom-tree__node-body">
              <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #customTreeNodeMenu1="matMenu">
                <button mat-menu-item>
                  Редактировать
                </button>
                <button mat-menu-item>
                  Новый пункт
                </button>
                <button mat-menu-item>
                  Новый вложенный пункт
                </button>
                <button mat-menu-item>
                  Удалить
                </button>
              </mat-menu>

              <div class="custom-tree__node-name">
                <span class="custom-tree__node-number">2.</span>
                Наименование раздела без вложенных пунктов
              </div>
              <button mat-button class="custom-tree__node-add mat-icon-button" disabled></button>
            </div>
          </li>

          <li class="custom-tree__node custom-tree__node_main">
            <div class="custom-tree__node-body">
              <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #customTreeNodeMenu1="matMenu">
                <button mat-menu-item>
                  Редактировать
                </button>
                <button mat-menu-item>
                  Новый пункт
                </button>
                <button mat-menu-item>
                  Новый вложенный пункт
                </button>
                <button mat-menu-item>
                  Удалить
                </button>
              </mat-menu>

              <div class="custom-tree__node-name">
                <span class="custom-tree__node-number">3.</span>
                Некоторый раздел
              </div>
              <button mat-button class="custom-tree__node-add mat-icon-button" disabled></button>
            </div>
          </li>

          <li class="custom-tree__node custom-tree__node_main" [ngClass]="{'custom-tree__node_expanded': isExpandedNode}">
            <div class="custom-tree__node-body">
              <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #customTreeNodeMenu1="matMenu">
                <button mat-menu-item>
                  Редактировать
                </button>
                <button mat-menu-item>
                  Новый пункт
                </button>
                <button mat-menu-item>
                  Новый вложенный пункт
                </button>
                <button mat-menu-item>
                  Удалить
                </button>
              </mat-menu>

              <div class="custom-tree__node-name">
                <span class="custom-tree__node-number">4.</span>
                Описание рассмотренной документации (материалов)
              </div>

              <button mat-button class="custom-tree__node-add mat-icon-button" (click)="isExpandedNode=!isExpandedNode">
                <mat-icon>chevron_right</mat-icon>
              </button>
            </div>

            <ul class="custom-tree__sub-list">

              <li class="custom-tree__node">
                <div class="custom-tree__node-body">
                  <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #customTreeNodeMenu1="matMenu">
                    <button mat-menu-item>
                      Редактировать
                    </button>
                    <button mat-menu-item>
                      Новый пункт
                    </button>
                    <button mat-menu-item>
                      Новый вложенный пункт
                    </button>
                    <button mat-menu-item>
                      Удалить
                    </button>
                  </mat-menu>

                  <div class="custom-tree__node-name">
                    <span class="custom-tree__node-number">4.1.</span>
                    Описание результатов инженерных изысканий
                  </div>
                  <button mat-button class="custom-tree__node-add mat-icon-button">
                    <mat-icon>chevron_right</mat-icon>
                  </button>
                </div>

                <ul class="custom-tree__sub-list">

                  <li class="custom-tree__node">
                    <div class="custom-tree__node-body">
                      <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                        <mat-icon>more_vert</mat-icon>
                      </button>
                      <mat-menu #customTreeNodeMenu1="matMenu">
                        <button mat-menu-item>
                          Редактировать
                        </button>
                        <button mat-menu-item>
                          Новый пункт
                        </button>
                        <button mat-menu-item>
                          Новый вложенный пункт
                        </button>
                        <button mat-menu-item>
                          Удалить
                        </button>
                      </mat-menu>

                      <div class="custom-tree__node-name">
                        <span class="custom-tree__node-number">4.1.1.</span>
                        Состав отчетных материалов о результатах инженерных изысканий
                      </div>
                      <button mat-button class="custom-tree__node-add mat-icon-button">
                        <mat-icon>chevron_right</mat-icon>
                      </button>
                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </li>

          <li class="custom-tree__node custom-tree__node_main">
            <div class="custom-tree__node-body">
              <button mat-button class="custom-tree__node-toggle mat-icon-button" [matMenuTriggerFor]="customTreeNodeMenu1">
                <mat-icon>more_vert</mat-icon>
              </button>

              <div class="custom-tree__node-name custom-tree__node-name-edit">
                <span class="custom-tree__node-number">5.</span>
                <mat-form-field class="custom-tree__node-name-input" floatLabel="never">
                  <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="1" placeholder="Новый пункт..." [(ngModel)]="nodeName"></textarea>
                </mat-form-field>
              </div>

              <div class="custom-tree__node-tools">
                <button mat-button
                        matTooltip="Сохранить"
                        matTooltipPosition="right"
                        (click)="saveNewTreeNode()">
                  <mat-icon class="text-green">done</mat-icon>
                </button>
              </div>
            </div>
          </li>
        </ul>

      </div>
    </div>
  </div>

  <div class="block-view__content">

    <ng-container [ngSwitch]="curentNodeName">
      <declaration-info
        *ngSwitchCase="'1.1. Сведения об организации по проведению экспертизы'">
      </declaration-info>

      <declarant-developer-customer-info
        *ngSwitchCase="'1.2. Сведения о заявителе, застройщике, техническом заказчике'">
      </declarant-developer-customer-info>

      <grounds-for-expertise
        *ngSwitchCase="'1.3. Основания для проведения экспертизы'">
      </grounds-for-expertise>

      <expert-work
        *ngSwitchCase="'Работа эксперта'">
      </expert-work>

      <expert-work
        *ngSwitchDefault>
      </expert-work>

    </ng-container>

  </div>
</div>
